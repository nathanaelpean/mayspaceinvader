(()=>{"use strict";var t={442:(t,e,i)=>{i.d(e,{A:()=>h});var r=i(601),s=i.n(r),o=i(314),n=i.n(o)()(s());n.push([t.id,"body{background-color:greenyellow;text-align:center}body h1{color:green;display:block}body canvas{box-shadow:rgba(0,0,0,0.25) 0px 54px 55px,rgba(0,0,0,0.12) 0px -12px 30px,rgba(0,0,0,0.12) 0px 4px 6px,rgba(0,0,0,0.17) 0px 12px 13px,rgba(0,0,0,0.09) 0px -3px 5px}\n",""]);const h=n},314:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",r=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),r&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),r&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,r,s,o){"string"==typeof t&&(t=[[null,t,void 0]]);var n={};if(r)for(var h=0;h<this.length;h++){var l=this[h][0];null!=l&&(n[l]=!0)}for(var a=0;a<t.length;a++){var c=[].concat(t[a]);r&&n[c[0]]||(void 0!==o&&(void 0===c[5]||(c[1]="@layer".concat(c[5].length>0?" ".concat(c[5]):""," {").concat(c[1],"}")),c[5]=o),i&&(c[2]?(c[1]="@media ".concat(c[2]," {").concat(c[1],"}"),c[2]=i):c[2]=i),s&&(c[4]?(c[1]="@supports (".concat(c[4],") {").concat(c[1],"}"),c[4]=s):c[4]="".concat(s)),e.push(c))}},e}},601:t=>{t.exports=function(t){return t[1]}},72:t=>{var e=[];function i(t){for(var i=-1,r=0;r<e.length;r++)if(e[r].identifier===t){i=r;break}return i}function r(t,r){for(var o={},n=[],h=0;h<t.length;h++){var l=t[h],a=r.base?l[0]+r.base:l[0],c=o[a]||0,d="".concat(a," ").concat(c);o[a]=c+1;var u=i(d),f={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==u)e[u].references++,e[u].updater(f);else{var p=s(f,r);r.byIndex=h,e.splice(h,0,{identifier:d,updater:p,references:1})}n.push(d)}return n}function s(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,s){var o=r(t=t||[],s=s||{});return function(t){t=t||[];for(var n=0;n<o.length;n++){var h=i(o[n]);e[h].references--}for(var l=r(t,s),a=0;a<o.length;a++){var c=i(o[a]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}o=l}}},659:t=>{var e={};t.exports=function(t,i){var r=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(i)}},540:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,i)=>{t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},825:t=>{t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var r="";i.supports&&(r+="@supports (".concat(i.supports,") {")),i.media&&(r+="@media ".concat(i.media," {"));var s=void 0!==i.layer;s&&(r+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),r+=i.css,s&&(r+="}"),i.media&&(r+="}"),i.supports&&(r+="}");var o=i.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}}},e={};function i(r){var s=e[r];if(void 0!==s)return s.exports;var o=e[r]={id:r,exports:{}};return t[r](o,o.exports,i),o.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var r in e)i.o(e,r)&&!i.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{var t;i.g.importScripts&&(t=i.g.location+"");var e=i.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");if(r.length)for(var s=r.length-1;s>-1&&(!t||!/^http(s?):/.test(t));)t=r[s--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=t})(),i.nc=void 0,(()=>{var t=i(72),e=i.n(t),r=i(825),s=i.n(r),o=i(659),n=i.n(o),h=i(56),l=i.n(h),a=i(540),c=i.n(a),d=i(113),u=i.n(d),f=i(442),p={};p.styleTagTransform=u(),p.setAttributes=l(),p.insert=n().bind(null,"head"),p.domAPI=s(),p.insertStyleElement=c(),e()(f.A,p),f.A&&f.A.locals&&f.A.locals;const v=i.p+"2fabf90d3dc7a1a06e87.png",w=i.p+"58d2547b952964555d7f.png",m=i.p+"e6218b527c176c19eb00.png",y=i.p+"27476fe5b6acb05a87b9.png";class g{constructor(t,e,i){this.x=t,this.y=e,this.width=44,this.height=32,this.sprite=new Image,this.sprite.src=this.getImage(i)}draw(t){t.drawImage(this.sprite,this.x,this.y,this.width,this.height)}move(t,e){this.x+=t,this.y+=e}getImage(t){switch(t){case 1:default:return w;case 2:return m;case 3:return y}}collideWith(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height}}const x=0,b=1,D=2,T=3,A=i.p+"dc908fec64b840587c54.png";class I{constructor(t,e,i,r,s){this.canvas=t,this.x=e,this.y=i,this.velocity=r,this.bulletColor=s,this.width=5,this.height=20}draw(t){this.y-=this.velocity,t.fillStyle=this.bulletColor,t.fillRect(this.x,this.y,this.width,this.height)}collideWith(t){return this.x+this.width>t.x&&this.x<t.x+t.width&&this.y+this.height>t.y&&this.y<t.y+t.height&&(console.log("colision"),!0)}}const B=i.p+"6b7d3b88ce0253459a43de469f39a91f.wav";class C{bullets=[];constructor(t,e,i,r){this.canvas=t,this.maxBulletsAtATime=e,this.bulletColor=i,this.soundEnabled=r,this.shootSound=new Audio,this.shootSound.src=B,this.shootSound.volume=.1}draw(t){this.bullets=this.bullets.filter((t=>t.y+t.width>0&&t.y+t.width<this.canvas.height)),this.timeTillNextBulletAllowed>0&&this.timeTillNextBulletAllowed--,this.bullets.forEach((e=>e.draw(t)))}shoot(t,e,i,r=0){if(this.bullets.length<this.maxBulletsAtATime&&this.timeTillNextBulletAllowed<=0){const r=new I(this.canvas,t,e,i,this.bulletColor);this.bullets.push(r),this.soundEnabled&&(this.shootSound.currentTime=0,this.shootSound.play())}this.timeTillNextBulletAllowed=r}collideWith(t){const e=this.bullets.findIndex((e=>e.collideWith(t)));return e>=0&&(this.bullets.splice(e,1),!0)}}let E=document.getElementById("game"),S=E.getContext("2d");E.height=600,E.width=600;const P=new Image;P.src=v,S.Image=P;const M=new C(E,10,"red",!0),R=new class{rightPressed=!1;leftPressed=!1;shootPressed=!1;constructor(t,e,i){this.canvas=t,this.velocity=e,this.x=this.canvas.width/2,this.y=this.canvas.height-75,this.width=50,this.height=48,this.image=new Image,this.image.src=A,this.bulletController=i,document.addEventListener("keydown",this.keydown),document.addEventListener("keyup",this.keyup)}draw(t){this.move(),t.drawImage(this.image,this.x,this.y,this.width,this.height),this.collideWithWalls(),this.shootPressed&&this.bulletController.shoot(this.x+this.width/2,this.y,4,10)}move(){this.rightPressed?this.x+=this.velocity:this.leftPressed&&(this.x+=-this.velocity)}collideWithWalls(){this.x<0&&(this.x=0),this.x>this.canvas.width-this.width&&(this.x=this.canvas.width-this.width)}keydown=t=>{"ArrowRight"===t.code&&(this.rightPressed=!0),"ArrowLeft"===t.code&&(this.leftPressed=!0),"Space"===t.code&&(this.shootPressed=!0)};keyup=t=>{"ArrowRight"==t.code&&(this.rightPressed=!1),"ArrowLeft"==t.code&&(this.leftPressed=!1),"Space"==t.code&&(this.shootPressed=!1)}}(E,3,M),V=new C(E,4,"white",!1),W=new class{currentDirection=b;xVelocity=0;yVelocity=0;defaultXVelocity=1;defaultYVelocity=1;fireBulletTimerDefault=100;fireBulletTimer=this.fireBulletTimerDefault;moveDownTimerDefault=30;moveDownTimer=this.moveDownTimerDefault;invadersMap=[[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[2,2,2,3,3,3,3,2,2,2],[2,2,2,3,3,3,3,2,2,2],[1,1,1,1,1,1,1,1,1,1],[2,2,2,2,2,2,2,2,2,2]];invadersRows=[];constructor(t,e,i){this.canvas=t,this.createInvaders(),this.invadersBulletController=e,this.playerBulletController=i}draw(t){this.decrementMoveDownTimer(),this.drawInvaders(t),this.fireBullet(),this.updateVelocityAndDirection(),this.resetMoveDownTimer(),this.collisionDetection()}drawInvaders(t){this.invadersRows.flat().forEach((e=>{e.draw(t),e.move(this.xVelocity,this.yVelocity)}))}createInvaders(){this.invadersMap.forEach(((t,e)=>{this.invadersRows[e]=[],t.forEach(((t,i)=>{t>0&&this.invadersRows[e].push(new g(50*i,35*e,t))}))}))}fireBullet(){if(this.fireBulletTimer--,this.fireBulletTimer<=0){this.fireBulletTimer=this.fireBulletTimerDefault;const t=this.invadersRows.flat(),e=t[Math.floor(Math.random()*t.length)];this.invadersBulletController.shoot(e.x+e.width/2,e.y,-3)}}updateVelocityAndDirection(){for(const t of this.invadersRows)if(this.currentDirection===b){this.xVelocity=this.defaultXVelocity,this.yVelocity=0;const e=t[t.length-1];if(e.x+e.width>=this.canvas.width){this.currentDirection=D,console.log("this.currentDirection "+this.currentDirection);break}}else if(this.currentDirection===D){if(this.moveDown(x))break}else if(this.currentDirection===x){if(this.xVelocity=-this.defaultXVelocity,this.yVelocity=0,t[0].x<=0){this.currentDirection=T,console.log("this.currentDirection "+this.currentDirection);break}}else if(this.currentDirection===T&&this.moveDown(b))break}moveDown(t){return this.xVelocity=0,this.yVelocity=1,this.moveDownTimer<=0&&(this.currentDirection=t,console.log("this.currentDirection "+this.currentDirection),!0)}collisionDetection(){this.invadersRows.forEach((t=>{t.forEach(((e,i)=>{this.playerBulletController.collideWith(e)&&t.splice(i,1)}))})),this.invadersRows=this.invadersRows.filter((t=>t.length>0))}resetMoveDownTimer(){this.moveDownTimer<=0&&(this.moveDownTimer=this.moveDownTimerDefault)}decrementMoveDownTimer(){this.currentDirection!==D&&this.currentDirection!==T||this.moveDownTimer--}collideWith(t){return this.invadersRows.flat().some((e=>e.collideWith(t)))}}(E,V,M);let k=!1,N=!1;setInterval((function(){S.drawImage(P,0,0,E.width,E.height),k||(W.draw(S),R.draw(S),M.draw(S),V.draw(S)),k||(V.collideWith(R)||W.collideWith(R)?k=!0:0==W.invadersRows.length&&(k=!0,N=!0)),function(){if(k){let t=N?"You Win":"Game Over",e=N?3.5:5;S.fillStyle="white",S.font="70px Arial",S.fillText(t,E.width/e,E.height/2)}}()}),1e3/60)})()})();